{% extends "nav.html" %}

{% block title %}
    <!-- Profile View Section -->
    <div class="flex justify-center items-center mt-4">
        <div class="flex border border-[#164863] rounded-full overflow-hidden">
            <a href="#" class="px-6 py-2 bg-[#164863] text-white font-medium m-2 rounded-full focus:outline-none">
                ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô
            </a>
        </div>
    </div>
    <section class="flex items-center justify-center">
        <div class="bg-white ">

        <!-- Display Profile Information -->
        <form method="post" enctype="multipart/form-data" class="mt-6">
            {% csrf_token %}
            <div class="relative inline-block">

                <!-- ‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå -->
                {% if member.profile_img %}
                    <img src="{{ member.profile_img.url }}" alt="Profile Image" class="w-48 h-48 object-cover rounded-full flex items-center justify-center border border-gray-300">
                {% else %}
                    <div class="w-48 h-48 bg-blue-100 text-white flex items-center justify-center rounded-full overflow-hidden relative">
                        <span class="text-9xl font-bold">üë§</span> <!-- ‡πÉ‡∏ä‡πâ '?' ‡πÅ‡∏ó‡∏ô‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏π‡∏õ -->
                    </div>
                {% endif %}

                <!-- ‡∏õ‡∏∏‡πà‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç -->
                <label for="profile_img" class="absolute top-2 right-2 bg-white p-2 rounded-full shadow hover:bg-gray-100 cursor-pointer z-10">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-600" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M17.414 2.586a2 2 0 010 2.828l-10 10a2 2 0 01-.707.707l-4 1a1 1 0 01-1.262-1.262l1-4a2 2 0 01.707-.707l10-10a2 2 0 012.828 0zM15.293 3.293l-10 10L4 16l2.293-.293 10-10L15.293 3.293zM16.707 1.707a4 4 0 00-5.656 0l-10 10a4 4 0 00-1.177 2.122l-1 4a3 3 0 003.707 3.707l4-1a4 4 0 002.122-1.177l10-10a4 4 0 000-5.656z" />
                    </svg>
                    <!-- ‡∏ü‡∏¥‡∏•‡∏î‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ -->
                    <input type="file" id="profile_img" name="profile_img" class="hidden" />
                </label>
            </div>

        <div class="bg-[rgba(221,242,253,0.5)] p-8 rounded-lg shadow-lg w-full max-w-md border">
            <!-- ‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß -->
            <div class="form-group">
                <label for="first_name" class="block text-sm font-medium text-gray-700">‡∏ä‡∏∑‡πà‡∏≠</label>
                <input type="text" name="first_name" value="{{ user.first_name }}" class="w-60 p-2 border border-gray-300 rounded-lg bg-white" />
            </div>
            <div class="form-group">
                <label for="last_name" class="block text-sm font-medium text-gray-700">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</label>
                <input type="text" name="last_name" value="{{ user.last_name }}" class="w-60 p-2 border border-gray-300 rounded-lg bg-white" />
            </div>
            <div class="form-group">
                <label for="email" class="block text-sm font-medium text-gray-700">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
                <input type="email" name="email" value="{{ user.email }}" class="w-60 p-2 border border-gray-300 rounded-lg bg-white" />
            </div>

            <div class="form-group mt-4">
                <label for="phone" class="block text-sm font-medium text-gray-700">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</label>
                {{ form.phone }}
            </div>
        </div>

            <!-- ‡∏õ‡∏∏‡πà‡∏°‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• -->
            <button type="submit" class="px-6 py-2 mt-4 bg-[#164863] border text-white rounded-lg hover:bg-[#DDF2FD] hover:text-[#164863]">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
        </form>
        </div>
    </section>

<!-- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î Modal -->
<div class="flex justify-center mt-4">
    <button id="requestOwnershipBtn" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">
        ‡∏Ç‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô
    </button>
</div>

<!-- Modal -->
<div id="ownershipModal" class="fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-50 hidden">
    <div class="bg-white p-6 rounded-lg shadow-lg w-96">
        <h2 class="text-lg font-semibold mb-4">‡∏Ç‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô</h2>
        <form id="storeRequestForm" method="POST" action="{% url 'request_store' %}">
            {% csrf_token %}
            <label class="block text-sm font-medium">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô</label>
            <input type="text" name="store_name" id="shopName" class="w-full border rounded p-2 mt-1" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" required>

            <div class="flex justify-end mt-4">
                <button type="button" id="closeModal" class="mr-2 bg-gray-500 hover:bg-gray-700 text-white py-2 px-4 rounded">
                    ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                </button>
                <button type="submit" id="confirmRequest" class="bg-green-500 hover:bg-green-700 text-white py-2 px-4 rounded">
                    ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô
                </button>
            </div>
        </form>
    </div>
</div>

<script>
    document.getElementById("requestOwnershipBtn").addEventListener("click", function() {
        document.getElementById("ownershipModal").classList.remove("hidden");
    });

    document.getElementById("closeModal").addEventListener("click", function() {
        document.getElementById("ownershipModal").classList.add("hidden");
    });

    document.getElementById("storeRequestForm").addEventListener("submit", function(event) {
        event.preventDefault();  // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

        let shopName = document.getElementById("shopName").value.trim();
        if (shopName === "") {
            alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô");
            return;
        }

        alert("‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏Ç‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏£‡∏≠‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö");  // ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
        document.getElementById("ownershipModal").classList.add("hidden");

        // ‡∏™‡πà‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÑ‡∏õ backend ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÅ‡∏™‡∏î‡∏á alert
        this.submit();
    });
</script>


{% endblock %}