{% extends "nav.html" %}

{% block title %}
<body class="bg-gray-100 min-h-screen">
    <div class="flex flex-col items-center justify-center min-h-screen bg-gray-100">
        <!-- หัวข้อ -->
        <h2 class="text-center text-3xl font-bold text-[#164863] mb-4">ยืนยันการใช้คูปอง</h2>

        <!-- การ์ดคูปอง -->
        <div class="bg-white rounded-lg shadow-xl relative border-t-4 border-gray-200 p-6 w-1/3 mb-4">
            <!-- หัวข้อ -->
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-red-500 font-bold text-2xl">{{ promotion.store.store_name }}</h2>
                <p class="text-gray-700 text-lg font-bold">ลด {{ promotion.discount|floatformat:0 }}%</p>
            </div>

            <!-- ชื่อโปรโมชั่น -->
            <p class="text-gray-700 font-semibold text-lg mb-4">{{ promotion.name }}</p>

            <!-- รายละเอียดโปรโมชั่น -->
            <div class="mt-2 text-gray-600 text-sm">
                <p>{{ promotion.details }}</p>
            </div>

            <!-- เส้นประ -->
            <div class="border-t-2 border-dashed mt-6 mb-4"></div>

            <!-- QR Code -->
            <div class="flex flex-col items-center justify-center">
                <p class="mb-2">Coupon ID: {{ coupon.id }}</p>
                <img src="{{ coupon.qr_code_image.url }}" alt="QR Code for Coupon {{ coupon.id }}" class="w-48 h-48">
            </div>

            <!-- วันที่หมดอายุ -->
            <p class="text-center text-gray-400 text-sm mt-4">
                ใช้งานได้ถึง {{ promotion.end|date:"d F Y" }}
            </p>
        </div>

        <!-- ปุ่มยืนยัน -->
        <div class="flex gap-4">
            <form method="post" action="{% url 'confirm_coupon_usage' store_id=promotion.store.id promotion_id=promotion.id coupon_id=coupon.id %}">
                {% csrf_token %}
                <button type="submit" class="px-6 py-3 bg-green-500 text-white rounded-lg shadow hover:bg-green-600">
                    ยืนยันการใช้
                </button>
            </form>
            <a href="javascript:history.back()" class="px-6 py-3 bg-gray-500 text-white rounded-lg shadow hover:bg-gray-600">
                ยกเลิก
            </a>
        </div>
    </div>
</body>
{% endblock %}
